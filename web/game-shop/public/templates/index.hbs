<script>
    function buy_clicked(event, pid) {
        event.preventDefault();
        Model.buy(pid).done(function () {
            route(event.target.href);
        }).fail(function (error) {
            console.error('ADDITEM ERROR',
                error.status,
                error.statusText);
        });
    };
</script>


{{> navbar}}

{{#> header}}
<div class="d-flex pt-5 mb-4"></div>
{{/ header}}
    <main>
      {{>messages}}
      <div class="container">
        <div class="row gy-4">
          {{#each products}}
          <div class="col-12 col-md-6 col-lg-4 col-xl-3">
            <div class="card text-dark bg-light">
              <img src="{{this.url}}" class="card-img-top">
              <div class="card-body">
                 <h5 class="card-title" style="text-align:center ">{{this.title}}</h5>
                 &nbsp;
                    <p class="card-text " style="text-align:center ">
                      {{this.description}}
                    </p>
                 <div class="d-flex align-items-center">
                 <div class="col text-nowrap">
                   <span class="display-6">{{this.price}} â‚¬</span>
                 </div>
                 <div class="col-auto">
                   <a href="#" onclick="buy_clicked(event, {{this._id}})" class="btn btn-primary ml-3 {{#unless ../user}}disabled{{/unless}}">Buy</a>
                   
                 </div>
                 </div>
              </div>
              </div>
          </div>
        {{/each}}            
      
        </div>
      </div>
    </main>
{{> footer}}
